<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coleção Maisto</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
    body {
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, sans-serif;
      margin: 0;
      background: #f8fafc;
      color: #111827;
    }
    .card:hover {
      transform: scale(1.03);
      box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
    }
    .collected-card {
      border: 4px solid #10b981;
    }
  </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
  const { useState, useEffect, useCallback } = React;

  const initialMiniaturesByBrand = {
    Audi: [
      { id: 1, name: "Audi TT Roadster", image: "https://photos.fife.usercontent.google.com/pw/AP1GczM0S4fse6lD9ZFtwQO397ZGSnpP5L25Uqb_9KAjiFCWALwWyXql3A7q=w260-h152-s-no-gm" },
      { id: 2, name: "Audi TT Roadster", image: "https://blz04pap002files.storage.live.com/y4mbIDLdf5o5QMIe_Z0xQ7Uj_2cnham_dRx21fbyqcciP47HqaWcf4Vz6ifQZeWwF7KlUt_2EK6fd4wu1QIPjysnxnL5lNWwu96yAtADu3xykr26HuICIQZGo7LgTPurM7RqUl1uP6CxQMnbMuziYu4oB8XtWkKKX2KC6WfYhsYbeCRRSBlU8mxoLZejpjZVf6Ek4z5x4Xr-GM1198ZZW7sdc26QXxtA5QN4p2jsvjbB30?encodeFailures=1&width=144&height=61" },
      { id: 3, name: "Audi TT Roadster", image: "https://blz04pap002files.storage.live.com/y4me_wYY1oMlqbircVulspIWpldfI2z6HlkXIQKBekJMWCyVFSwdhmldC6KMyCeZGd4lDf-G8OXEalk48SghHvHLByFItUr5RNnc87VKYB8RIzxt2GbGRsWTMYSBR5-TsWVQ-NOT44URsW3H8j6-SVioo2joLbWO5viuKkzA7GJAzPRbkQKU8IWdwHoWjyRIQ3LwPaQvC84FzK2yf37hreKnIs-1NDQdxQpScDezstWpAA?encodeFailures=1&width=228&height=91" },
      { id: 4, name: "Audi A8 Avant", image: "https://blz04pap002files.storage.live.com/y4mgWP1c9_y3X9rNmsKGP229niHoFHA5D3a_CbDs8EUJNwdZ1mTgGzZsBvTHuEFCL1CWooC5QxKF53cS1e5LrxNWW8oEQn2uS45IqVH3MpgGUUkig6XGRIX4iCDY0Asp7VRo3LZBsUvovRABphMSEzWUEnbvil8ld9XJVB92CQuyqsbntd2cr7BbgTJVFj6Uokvuqktoql1rKsgwoZ4FXiwyy9nHvh-VbHQwzngBXDpiLM?encodeFailures=1&width=259&height=102" },
      { id: 5, name: "Audi A8 Avant", image: "https://blz04pap002files.storage.live.com/y4me_XfFQtOR9ETlMLysJKE0rUTtf08RIguIoZ3nATBtEt_jfdbgJeQpME3S_uTB-gLjPFxWpvjsWw9InKRvWuuhBbR2L0qEmBmTcraMTJa5LBMQAjfLImEgw1vV5Ygs5JQudKA--vu9hDRKEX15SBf-_2nCbHOC68mDBI4TYluy9WSNBDZqmp-GSLd63t6jp2frgrYMeeNB6V8-reb6rFaxykbxpxg2a7pZUdd1QoPDWU?encodeFailures=1&width=690&height=223" },
    ],
    BMW: [
      { id: 1, name: "BMW Z3", image: "https://1drv.ms/i/c/3e9beb4ba91355ce/Ec5VE6lL65sggD5-AwAAAAABNEzT93MNO4fW_iQYEL2CrA?e=tXzCMW" },
      { id: 2, name: "BMW Z3", image: "https://blz04pap002files.storage.live.com/y4mG_csS3sKeW9vn7ccqbMyaxihlcV1BVfRZnTkWGA3xW8YZV6FLT5OcD8I7CquJXhkuI9k3GaFHP4o8WrMmqWePhqNW1HfFlnBe9o12GQMnSobhEGpm8bvAn-M-fm4icrGLpayScF_-L1aFA2HCFoN31eRqAmmwnWIRRMNZw4Poj5vPJNq9d5zGZJ_3A7F8On33h7PdlKyl42AtYijYYxqWtkoZGdUfs2Ns0lx6io2Z1Y?encodeFailures=1&width=343&height=141" },
      { id: 3, name: "BMW Z4", image: "https://blz04pap002files.storage.live.com/y4mhBwBDALUw95mwuA6lwi3YGgxJ_L4ak9z3CP84pCIYr-FylgdLlwNWr4Q0_2loDv9Tt2jAg8DeBBZTjuQ6vbZj638pW04jwNeXdqKhFCA-Krqjdu3M2FB52bvAkn926r8uZFmF1wS-IZDJWUtAbI0rnUggHtAaQAjjuqKkbA9DZoaUPcKLf2foQYqbH0R2UkpCL-eTeDwkM2qyiEtYEP4bWANNxO92-wi5iBEBasoTuw?encodeFailures=1&width=444&height=190" },
      { id: 4, name: "BMW Z8", image: "https://blz04pap002files.storage.live.com/y4mfueMot62O1ztUhyzi4-9MSB6Asp2C5V0Kk7AvoaAWy-POxICDoAC4ePHymwCDXu-HpZKc4VI1ABlG6nBHCGoOy8gJPTA_7JlLLe0QjGpk-hOXgvVhjVEZur21KTFWA82gwUZb0pp-mOREbP74IpBnSay7q0f2VLqMLh1zJ2UPvn1XUcT8Wa1yJqMWM6eK1_Wqb3FipN7Ij5sDkXjSSDoGyoKqvuMSGtfUAHvY233ChI?encodeFailures=1&width=260&height=98" },
      { id: 5, name: "BMW Z8", image: "https://blz04pap002files.storage.live.com/y4mKdj0bs4hvvD-co_LITXv-nD0lF_qHdiPUWJ0k5BeUFNpDkaG0osoBR_EeG70_h6VqXhTIQzoU6Ch04DwxnCBXbRkmqXfdal_Gkg9SJNu1HHVDHXR-D_lijueApl5XK6EH5Vw5DPnEqRfkBDIA32laQKX2ckf2JX5FEaLv7xctnqOngjRcVcyWbwBjdwCGqIIBIR61TRPs8hxjCK2jorJn_LFCMhWu0pxDave_aj1vkE?encodeFailures=1&width=260&height=91" },
      { id: 6, name: "BMW Z8", image: "https://blz04pap002files.storage.live.com/y4mtJqToWQCIdQnMADTwUEERy6F4zmRT5dovnrXlr2ufL-uFbzVhOM-YLinTci3h1u9FGTdjS0CjlxJuO64WvW3Ab1JmV0ZpzxI_Twn0lLT2LKzZnXZxbH34wjtlozrUH-YHlbluad1OoAcXFIPd4Q-fg0_c4mhOlLfdi9ldkuPqwgiz5-Pi8LwTuRsetw2iLz2sVp2oqgNn6Rm9wbdJSJFOYbRfzDxbJyT_lDxQvIQn9U?encodeFailures=1&width=260&height=105" },
      { id: 7, name: "BMW i8", image: "blob:https://onedrive.live.com/d9b53e9a-f0ab-473e-a7f4-73a6b3c96f07" },
      { id: 8, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 9, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 10, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 11, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 12, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 13, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 14, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 15, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 16, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 17, name: "BMW i8", image: "img/bmw/02.jpg" },
      { id: 18, name: "BMW i8", image: "img/bmw/02.jpg" },
    ],
    Buick: [
      { id: 1, name: "Buick", image: "img/bmw/01.jpg" },
      { id: 2, name: "Buick", image: "img/bmw/02.jpg" },
    ], 
    Cadillac: [
      { id: 1, name: "Cadillac", image: "img/bmw/01.jpg" },
      { id: 2, name: "Cadillac", image: "img/bmw/02.jpg" },
    ], 
    Chevrolet: [
      { id: 1, name: "Chevrolet", image: "img/chevrolet/01.jpg" },
      { id: 2, name: "Chevrolet", image: "img/chevrolet/02.jpg" },
    ],
    Chrysler: [
      { id: 1, name: "Chrysler", image: "img/bmw/01.jpg" },
      { id: 2, name: "Chrysler", image: "img/bmw/02.jpg" },
    ], 
    Dodge: [
      { id: 1, name: "Dodge", image: "img/bmw/01.jpg" },
      { id: 2, name: "Dodge", image: "img/bmw/02.jpg" },
    ],
    Fantasia: [
      { id: 1, name: "Fantasia", image: "img/bmw/01.jpg" },
      { id: 2, name: "Fantasia", image: "img/bmw/02.jpg" },
    ],
    Ford: [
      { id: 1, name: "Ford", image: "img/ford/01.jpg" },
      { id: 2, name: "Ford", image: "img/ford/02.jpg" },
    ],
    Honda: [
      { id: 1, name: "Honda", image: "img/bmw/01.jpg" },
      { id: 2, name: "Honda", image: "img/bmw/02.jpg" },
    ], 
    Hummer: [
      { id: 1, name: "Hummer", image: "img/bmw/01.jpg" },
      { id: 2, name: "Hummer", image: "img/bmw/02.jpg" },
    ], 
    Jaguar: [
      { id: 1, name: "Jaguar", image: "img/bmw/01.jpg" },
      { id: 2, name: "Jaguar", image: "img/bmw/02.jpg" },
    ], 
    Jeep: [
      { id: 1, name: "Jeep", image: "img/bmw/01.jpg" },
      { id: 2, name: "Jeep", image: "img/bmw/02.jpg" },
    ],
    Lamborghini: [
      { id: 1, name: "Lamborghini Aventador", image: "img/lamborghini/01.jpg" },
      { id: 2, name: "Lamborghini", image: "img/bmw/02.jpg" },
    ],
    Lexus: [
      { id: 1, name: "Lexus", image: "img/bmw/01.jpg" },
      { id: 2, name: "Lexus", image: "img/bmw/02.jpg" },
    ],
    Mercedez: [
      { id: 1, name: "Mercedez", image: "img/bmw/01.jpg" },
      { id: 2, name: "Mercedez", image: "img/bmw/02.jpg" },
    ], 
    Plymouth: [
      { id: 1, name: "Plymouth", image: "img/bmw/01.jpg" },
      { id: 2, name: "Plymouth", image: "img/bmw/02.jpg" },
    ],
    Pontiac: [
      { id: 1, name: "Pontiac", image: "img/bmw/01.jpg" },
      { id: 2, name: "Pontiac", image: "img/bmw/02.jpg" },
    ], 
    Porsche: [
     { id: 1, name: "Porsche 911 GT3", image: "img/porsche/01.jpg" },
     { id: 2, name: "Porsche", image: "img/bmw/02.jpg" },
    ],
    Serviço: [
      { id: 1, name: "Serviço", image: "img/bmw/01.jpg" },
      { id: 2, name: "Serviço", image: "img/bmw/02.jpg" },
    ],
    Toyota: [
      { id: 1, name: "Toyota", image: "img/bmw/01.jpg" },
      { id: 2, name: "Toyota", image: "img/bmw/02.jpg" },
    ],
    Trailer: [
      { id: 1, name: "Trailer", image: "img/bmw/01.jpg" },
      { id: 2, name: "Trailer", image: "img/bmw/02.jpg" },
    ],
    Trucks: [
      { id: 1, name: "Trucks", image: "img/bmw/01.jpg" },
      { id: 2, name: "Trucks", image: "img/bmw/02.jpg" },
    ], 
    VolksWagen: [
      { id: 1, name: "VolksWagen", image: "img/bmw/01.jpg" },
      { id: 2, name: "VolksWagen", image: "img/bmw/02.jpg" },
    ],
    Outros: [
      { id: 1, name: "Outros", image: "img/bmw/01.jpg" },
      { id: 2, name: "Outros", image: "img/bmw/02.jpg" },
    ],
  };

  const brandsList = [
    "Audi","BMW","Buick","Cadillac","Chevrolet","Chrysler",
    "Dodge","Fantasia","Ford","Honda","Hummer","Jaguar",
    "Jeep","Lamborghini","Lexus","Mercedez","Plymouth",
    "Pontiac","Porsche","Serviço","Toyota","Trailer",
    "Trucks","VolksWagen","Outros"
  ].sort();

  const LOCAL_STORAGE_KEY_COLLECTION = "maistoCollectionData";
  const LOCAL_STORAGE_KEY_LOCKED = "maistoLockedData";

  const getInitialCollection = () => JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_COLLECTION) || "{}");
  const getInitialLockedItems = () => JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_LOCKED) || "{}");

  function App() {
    const [selectedBrand, setSelectedBrand] = useState(null);
    const [miniaturesByBrand] = useState(initialMiniaturesByBrand);
    const [collection, setCollection] = useState(getInitialCollection);
    const [lockedItems, setLockedItems] = useState(getInitialLockedItems);

    useEffect(() => localStorage.setItem(LOCAL_STORAGE_KEY_COLLECTION, JSON.stringify(collection)), [collection]);
    useEffect(() => localStorage.setItem(LOCAL_STORAGE_KEY_LOCKED, JSON.stringify(lockedItems)), [lockedItems]);

    const toggleMiniature = useCallback((brand, id) => {
      setCollection(prev => {
        const updated = { ...prev };
        const brandData = { ...updated[brand] };
        brandData[id] = !brandData[id];
        if (!brandData[id]) delete brandData[id];
        if (Object.keys(brandData).length === 0) delete updated[brand];
        else updated[brand] = brandData;
        return updated;
      });
    }, []);

    const toggleLockAll = useCallback((brand) => {
      setLockedItems(prev => {
        const updated = { ...prev };
        const current = updated[brand] || {};
        const isAnyUnlocked = Object.keys(current).length !== (miniaturesByBrand[brand]?.length || 0);
        if (isAnyUnlocked) {
          const newLocks = {};
          (miniaturesByBrand[brand] || []).forEach(m => { newLocks[m.id] = true; });
          updated[brand] = newLocks;
        } else {
          delete updated[brand];
        }
        return updated;
      });
    }, [miniaturesByBrand]);

    const BackgroundWrapper = ({ children }) => (
      <div className="min-h-screen bg-cover bg-center flex flex-col items-center justify-start text-white p-4"
        style={{ backgroundImage: "url('img/alemed.png')", backgroundAttachment: "fixed" }}>
        <div className="bg-black/70 w-full h-full flex flex-col items-center justify-start p-6 rounded-xl max-w-6xl mx-auto shadow-2xl min-h-[90vh] md:min-h-[95vh]">
          {children}
        </div>
      </div>
    );

    if (!selectedBrand) {
      return (
        <BackgroundWrapper>
          <h1 className="text-4xl font-extrabold text-center mb-4 text-purple-400">Coleção Maisto</h1>
          <p className="mb-8 text-center text-gray-300">Selecione a marca para visualizar sua coleção.</p>
          <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 w-full max-w-5xl">
            {brandsList.map((brand) => (
              <div key={brand} onClick={() => setSelectedBrand({ brand })}
                className="bg-white/10 shadow-lg rounded-xl p-3 flex flex-col items-center justify-center border border-purple-500/50 card h-24">
                <h3 className="text-xl font-bold text-purple-300 text-center">{brand}</h3>
              </div>
            ))}
          </div>
        </BackgroundWrapper>
      );
    }

    const { brand } = selectedBrand;
    const miniatures = miniaturesByBrand[brand] || [];
    const currentCollection = collection[brand] || {};
    const currentLocked = lockedItems[brand] || {};
    const allLocked = Object.keys(currentLocked).length === miniatures.length && miniatures.length > 0;

    return (
      <BackgroundWrapper>
        <div className="w-full flex justify-between items-center mb-6">
          <button onClick={() => setSelectedBrand(null)}
            className="flex items-center gap-2 px-4 py-2 text-sm bg-purple-600 text-white font-semibold rounded-lg shadow-lg hover:bg-purple-700 active:scale-95 transition">
            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
              <path strokeLinecap="round" strokeLinejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            Voltar
          </button>
          {miniatures.length > 0 && (
            <button
              onClick={() => toggleLockAll(brand)}
              className={
                (allLocked
                  ? "bg-red-600 text-white hover:bg-red-700"
                  : "bg-gray-200 text-gray-800 hover:bg-gray-300") +
                " px-4 py-2 text-sm font-semibold rounded-lg shadow-lg transition"
              }>
              {allLocked ? 'Desbloquear Todos' : 'Bloquear Todos'}
            </button>
          )}
        </div>

        <h2 className="text-4xl font-extrabold text-purple-400 mb-6 text-center">Coleção Maisto - {brand}</h2>

        {miniatures.length === 0 ? (
          <p className="text-gray-200">Nenhuma miniatura cadastrada para esta marca ainda.</p>
        ) : (
          <div className="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 w-full">
            {miniatures.map((mini) => {
              const isCollected = currentCollection[mini.id];
              const isLocked = currentLocked[mini.id];
              return (
                <div key={mini.id} className={"bg-white shadow-xl rounded-xl p-3 flex flex-col items-center justify-between " + (isCollected ? "collected-card" : "border border-gray-200")}>
                  <div className="w-full h-[120px] bg-gray-200 rounded-lg mb-2 flex items-center justify-center overflow-hidden">
                    {mini.image ? (
                      <img src={mini.image} alt={mini.name} className="object-contain w-full h-full rounded-lg"
                        onError={(e) => { e.target.onerror = null; e.target.src = 'https://placehold.co/225x120/f3f4f6/333?text=ERRO+IMG'; }} />
                    ) : <span className="text-gray-400 text-sm font-medium">Foto</span>}
                  </div>
                  <p className="text-gray-800 text-xs sm:text-sm font-semibold text-center mt-1 mb-2">{mini.name}</p>
                  <label
                    onClick={!isLocked ? () => toggleMiniature(brand, mini.id) : undefined}
                    className={"flex w-full justify-center gap-2 text-gray-800 text-sm font-medium p-2 rounded-lg " + (isLocked ? "bg-gray-200 cursor-not-allowed opacity-70" : "bg-gray-100 hover:bg-gray-200 cursor-pointer")}>
                    <input type="checkbox" checked={isCollected || false} disabled={isLocked} readOnly className="w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500" />
                    Tenho
                  </label>
                </div>
              );
            })}
          </div>
        )}
      </BackgroundWrapper>
    );
  }

  ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>

</body>
</html>
